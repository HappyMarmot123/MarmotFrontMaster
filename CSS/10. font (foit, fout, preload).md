# CSS Font 최적화 (FOIT, FOUT, Preload)

## 📖 개요

**CSS Font 최적화**는 웹 폰트 로딩 성능과 사용자 경험을 향상시키기 위한 핵심 기술입니다. FOIT(Flash of Invisible Text), FOUT(Flash of Unstyled Text), 그리고 font preload 등의 기법을 통해 폰트 로딩 중 발생하는 시각적 문제를 해결하고, 빠르고 일관된 타이포그래피 경험을 제공할 수 있습니다.

**Font 최적화가 현대 웹 개발에서 중요한 이유:**

- **사용자 경험**: 폰트 로딩 지연으로 인한 레이아웃 시프트와 깜빡임 현상 방지
- **성능 최적화**: 폰트 파일 크기와 로딩 시간 최적화로 페이지 로딩 속도 향상
- **접근성**: 모든 사용자가 읽기 쉬운 텍스트에 빠르게 접근할 수 있도록 보장
- **브랜드 일관성**: 의도된 타이포그래피가 신속하게 표시되어 브랜드 아이덴티티 유지
- **Core Web Vitals**: CLS(Cumulative Layout Shift) 개선으로 SEO 성능 향상

**Font 최적화의 핵심 가치:**
웹 폰트는 브랜드 아이덴티티와 사용자 경험의 핵심 요소이지만, 잘못 구현하면 성능 저하와 사용성 문제를 야기할 수 있습니다. 적절한 최적화를 통해 아름다운 타이포그래피와 빠른 성능을 동시에 달성할 수 있으며, 이는 현대 웹 개발의 필수 역량입니다.

## 🔤 FOIT와 FOUT 이해하기

### 1. **FOIT (Flash of Invisible Text)**

**FOIT의 특징과 문제점:**

- 웹 폰트가 로딩되는 동안 텍스트가 완전히 보이지 않음
- 사용자가 콘텐츠를 읽을 수 없어 사용성 저하
- 폰트 로딩 실패 시 영구적인 빈 화면 위험

**FOIT 발생 상황:**

```css
/* FOIT를 유발하는 일반적인 웹 폰트 선언 */
@font-face {
  font-family: "CustomFont";
  src: url("customfont.woff2") format("woff2"), url("customfont.woff") format("woff");
  /* font-display 속성 없음 - 기본값은 auto (브라우저마다 다름) */
}

.text-content {
  font-family: "CustomFont", sans-serif;
  /* 폰트 로딩 중 텍스트가 보이지 않을 수 있음 */
}
```

**FOIT 해결 방법:**

```css
/* font-display: swap으로 FOIT 방지 */
@font-face {
  font-family: "CustomFont";
  src: url("customfont.woff2") format("woff2");
  font-display: swap; /* 즉시 폴백 폰트 표시, 로딩 완료 시 교체 */
}

/* font-display: fallback으로 균형잡힌 접근 */
@font-face {
  font-family: "HeadingFont";
  src: url("headingfont.woff2") format("woff2");
  font-display: fallback; /* 짧은 대기 후 폴백 폰트, 제한 시간 내 교체 */
}
```

**Font-display 속성의 핵심 특징:**

**Swap의 즉시 표시:**

- **폴백 폰트 우선**: 웹 폰트 로딩과 관계없이 즉시 폴백 폰트로 텍스트 표시
- **로딩 완료 시 교체**: 웹 폰트 로딩이 완료되면 자동으로 교체
- **사용성 향상**: 사용자가 콘텐츠를 즉시 읽을 수 있어 사용성 크게 향상

**Fallback의 균형잡힌 접근:**

- **짧은 대기 시간**: 100ms 동안 웹 폰트 로딩 대기
- **제한 시간 내 교체**: 3초 내에 로딩 완료되면 교체, 그렇지 않으면 폴백 폰트 유지
- **성능과 사용성의 균형**: FOIT와 FOUT 사이의 적절한 균형점 제공

**실무 활용 시 고려사항:**

- **폰트 중요도**: 제목 폰트는 swap, 본문 폰트는 fallback 권장
- **폴백 폰트 선택**: 웹 폰트와 유사한 메트릭을 가진 시스템 폰트 선택
- **레이아웃 안정성**: 폰트 교체로 인한 레이아웃 시프트 최소화

### 2. **FOUT (Flash of Unstyled Text)**

**FOUT의 특징과 활용:**

- 폴백 폰트로 텍스트를 먼저 표시
- 웹 폰트 로딩 완료 시 교체로 인한 깜빡임 발생
- 콘텐츠 접근성은 좋지만 시각적 불일치 문제

**FOUT 최적화 전략:**

```css
/* 폴백 폰트와 웹 폰트의 크기 차이 최소화 */
@font-face {
  font-family: "WebFont";
  src: url("webfont.woff2") format("woff2");
  font-display: swap;
  /* 폰트 메트릭 조정으로 레이아웃 시프트 최소화 */
  ascent-override: 90%;
  descent-override: 25%;
  line-gap-override: 0%;
  size-adjust: 100%;
}

/* 폴백 폰트 스택 최적화 */
.optimized-text {
  font-family: "WebFont", /* 웹 폰트와 유사한 메트릭의 시스템 폰트 */ "Segoe UI",
    "Roboto", "Helvetica Neue", Arial, sans-serif;

  /* 폰트 크기 조정으로 FOUT 임팩트 최소화 */
  font-size: 1rem;
  line-height: 1.5;
  letter-spacing: 0.01em;
}

/* 웹 폰트 로딩 상태별 스타일 */
.text-content {
  font-family: Arial, sans-serif; /* 기본 폴백 */
  transition: font-family 0.1s ease; /* 부드러운 전환 */
}

/* 웹 폰트 로딩 완료 시 */
.fonts-loaded .text-content {
  font-family: "WebFont", Arial, sans-serif;
}

/* 웹 폰트 로딩 실패 시 */
.fonts-failed .text-content {
  font-family: Arial, sans-serif;
  /* 스타일 보정으로 유사한 느낌 유지 */
  font-weight: 500;
  letter-spacing: 0.02em;
}
```

## ⚡ Font-Display 속성 마스터하기

### 1. **Font-Display 값별 특성**

**각 값의 동작과 적용 시나리오:**

- `auto`: 브라우저 기본 동작 (일반적으로 block과 유사)
- `block`: 짧은 대기 후 무제한 교체 허용
- `swap`: 즉시 폴백 표시, 무제한 교체 허용
- `fallback`: 짧은 대기, 제한된 교체 기간
- `optional`: 네트워크 성능에 따른 선택적 로딩

**실무 활용 가이드:**

```css
/* 브랜드 로고 폰트 - 중요하므로 block 사용 */
@font-face {
  font-family: "BrandLogo";
  src: url("brand-logo.woff2") format("woff2");
  font-display: block;
  /* 로고는 정확한 폰트가 중요하므로 잠시 기다려서라도 정확히 표시 */
}

/* 본문 텍스트 - 가독성 우선으로 swap 사용 */
@font-face {
  font-family: "BodyText";
  src: url("body-text.woff2") format("woff2");
  font-display: swap;
  /* 즉시 읽을 수 있어야 하므로 폴백 폰트로 먼저 표시 */
}

/* 제목 폰트 - 균형잡힌 fallback 사용 */
@font-face {
  font-family: "HeadingFont";
  src: url("heading-font.woff2") format("woff2");
  font-display: fallback;
  /* 짧은 대기 후 제한된 시간 내에만 교체 */
}

/* 장식 폰트 - 선택적 optional 사용 */
@font-face {
  font-family: "DecorativeFont";
  src: url("decorative-font.woff2") format("woff2");
  font-display: optional;
  /* 네트워크가 빠를 때만 로딩, 느리면 폴백 유지 */
}

/* 아이콘 폰트 - 필수적이므로 block 사용 */
@font-face {
  font-family: "IconFont";
  src: url("icon-font.woff2") format("woff2");
  font-display: block;
  /* 아이콘이 없으면 의미가 손상되므로 반드시 로딩 */
}
```

### 2. **Font-Display와 사용자 경험**

**콘텐츠 타입별 최적 전략:**

```css
/* 뉴스/블로그 콘텐츠 - 가독성 최우선 */
@font-face {
  font-family: "ReadableFont";
  src: url("readable-font.woff2") format("woff2");
  font-display: swap; /* 즉시 읽을 수 있도록 */
}

.article-content {
  font-family: "ReadableFont", Georgia, "Times New Roman", serif;
  font-size: 1.125rem;
  line-height: 1.7;
  /* 긴 텍스트 읽기에 최적화 */
}

/* 마케팅 페이지 - 브랜드 경험 중요 */
@font-face {
  font-family: "BrandFont";
  src: url("brand-font.woff2") format("woff2");
  font-display: fallback; /* 브랜드 느낌과 성능의 균형 */
}

.marketing-headline {
  font-family: "BrandFont", "Helvetica Neue", Arial, sans-serif;
  font-size: 3rem;
  font-weight: 700;
  /* 임팩트있는 헤드라인 */
}

/* 대시보드/앱 UI - 성능 우선 */
@font-face {
  font-family: "UIFont";
  src: url("ui-font.woff2") format("woff2");
  font-display: optional; /* 빠른 인터랙션이 중요 */
}

.dashboard-text {
  font-family: "UIFont", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  font-size: 0.875rem;
  /* 시스템 폰트와 유사한 느낌 유지 */
}
```

## 🎯 결론

CSS Font 최적화는 웹 성능과 사용자 경험을 동시에 향상시키는 핵심 기술입니다. FOIT/FOUT 문제 해결, 적절한 font-display 전략, 그리고 효과적인 preload 활용을 통해 아름다운 타이포그래피와 빠른 성능을 모두 달성할 수 있습니다.

**성공적인 Font 최적화를 위한 핵심 요소:**

1. **로딩 전략**: font-display 속성으로 FOIT/FOUT 제어
2. **우선순위 관리**: 중요한 폰트는 preload, 선택적 폰트는 지연 로딩
3. **파일 최적화**: 서브셋팅과 Variable Font 활용으로 크기 최소화
4. **성능 모니터링**: Core Web Vitals 개선과 실시간 성능 추적
5. **사용자 배려**: 네트워크 상태와 사용자 설정 고려

Font 최적화를 마스터하면 브랜드 아이덴티티를 유지하면서도 뛰어난 성능을 제공하는 웹사이트를 구축할 수 있으며, 모든 사용자에게 일관되고 빠른 타이포그래피 경험을 제공할 수 있습니다.
