# CSS attr() 함수

## 📖 개요

**CSS `attr()` 함수**는 HTML 요소의 속성(attribute) 값을 CSS에서 참조해 쓸 수 있게 해주는 기능입니다. 대표적으로 `content` 속성에서 가상 요소(`::before`, `::after`)의 텍스트를 동적으로 출력할 때 활용합니다. 중복 코드를 줄이고, HTML 의미를 CSS 표현과 연결하는 데 유용합니다.

**왜 중요한가?**

- **중복 제거**: 같은 값을 HTML 속성으로 한 번만 선언하고, CSS에서 재활용
- **유지보수성**: 값 변경 시 HTML만 수정하면 스타일 출력이 자동 반영
- **표현력 확장**: 라벨/툴팁/배지 등 부가 텍스트를 마크업 속성으로 관리

## 🎯 기본 문법과 동작 원리

```css
content: attr(attribute-name);
content: attr(attribute-name, fallback-value);
```

- **읽기 대상**: 가상 요소가 붙은 “그 요소”의 속성만 읽습니다(상위/자식의 속성은 불가)
- **실시간성**: 속성 값이 런타임에 변경되면 브라우저가 다시 페인트하면서 출력도 업데이트
- **폴백(fallback)**: 속성이 없거나 빈 문자열일 때 대체 문자열을 사용
- **이스케이프**: 큰따옴표/백슬래시 등 특수문자 출력 시 적절히 이스케이프 또는 따옴표 감싸기

## ✅ 언제 쓰면 좋은가

- **툴팁/도구 설명**: `data-tooltip` → 시각적 힌트 출력
- **배지/카운트**: `data-count` → 알림 수량 표시(핵심 데이터는 HTML에도 존재해야 함)
- **라벨/상태표시**: `data-label`, `data-status` → 보조 텍스트
- **다국어 라벨 스위치(간단 케이스)**: 언어별 속성 값을 선택적으로 노출

## ❌ 피해야 하는 용도

- **레이아웃/수치 제어**: 너비/높이/간격 등 수치는 CSS 변수나 JS로 처리
- **접근성 핵심 텍스트**: 스크린 리더 호환성은 환경별 차이가 있으므로, 중요한 문구는 HTML로 제공 + `aria-*` 병행
- 
- 
- **SEO가 중요한 본문 텍스트**: CSS `content`로 생성된 텍스트는 검색엔진 인덱싱 보장이 약함

## 🧩 패턴과 예제

### 1) 툴팁/도움말

```css
.tooltip {
  position: relative;
}
.tooltip::after {
  content: attr(data-tooltip, "");
  position: absolute;
  inset-inline-start: 0;
  inset-block-end: 100%;
}
```

### 2) 배지/카운트

```css
.badge {
  position: relative;
}
.badge::after {
  content: attr(data-count, "0");
  position: absolute;
  inset: -6px -8px auto auto;
}
```

### 3) 상태/우선순위 라벨

```css
.label::after {
  content: attr(data-priority, "");
  text-transform: capitalize;
}
.label[data-priority="high"] {
  background: #fee2e2;
  color: #991b1b;
}
```

### 4) 간단 다국어 라벨

```css
.multilang::before {
  content: attr(data-label-en);
}
[lang="ko"] .multilang::before {
  content: attr(data-label-ko);
}
```

## ♿ 접근성 체크리스트

- **핵심 정보는 HTML**: 시각적으로만 필요한 보조 텍스트에 `attr()`을 사용하고, 중요한 텍스트는 DOM에 존재하게 하세요
- **ARIA 병행**: 시각 텍스트가 CSS로만 존재한다면, `aria-label`/`aria-describedby`로 보조 기술에도 동일 정보 제공
- **키보드 포커스**: 가상 요소는 포커스를 받지 않습니다. 인터랙션이 필요하면 실제 요소로 구현

## 🔧 실무 가이드(요약)

- **문자열 출력**만 `content`에서 안전하게 사용
- **수치 연산 필요** 시: `attr()` 대신 `var(--x)` + HTML/JS로 변수 주입
- **값의 단일 출처**: 값은 HTML 속성이나 데이터 레이어 한 곳에서만 관리
- **국제화/번역**: 간단 라벨 외에는 프레임워크/템플릿에서 직접 텍스트 렌더링 권장

## 📚 결론

`attr()`은 “HTML 속성 → CSS 시각 출력”을 연결하는 실무 유틸입니다. 문자열 출력에 집중하고, 수치/레이아웃은 CSS 변수와 JS로 처리하면 호환성과 유지보수성이 크게 향상됩니다. 위의 제약과 접근성 가이드를 지키면, 적은 코드로도 의미 있는 UX 향상을 얻을 수 있습니다.
