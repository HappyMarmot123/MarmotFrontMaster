# 싱글톤 (Singleton)

## 개요

- **문제**: 전역적으로 단일 인스턴스가 필요(설정/레지스트리/풀)하며, 중복 생성을 방지해야 함
- **해법**: 생성자를 감추고 정적 접근 메서드로 단일 인스턴스 제공

## 프론트엔드 활용 아이디어

- **전역 설정/Feature Flag 스토어**
- **이벤트 버스/미들웨어 레지스트리**
- **인증 토큰/세션 스토리지 관리자**

## 백엔드/전체 활용 아이디어

- **데이터베이스 커넥션 풀**
- **로깅/설정 관리자**
- **캐시 매니저**

## 장단점

- **장점**: 전역 일관성, 자원 절약
- **단점**: 테스트 어렵고(전역 상태), 순서 의존/숨은 의존 증가

## 구현 팁

- 의존성 주입으로 싱글톤을 감싸 테스트 용이성 확보
- 멀티스레드 환경에선 동기화 고려(브라우저 JS는 단일 스레드)

## JavaScript 예제 (주석 포함)

```javascript
class Config {
  static #instance;
  constructor() {
    // 생성자 보호: 이미 인스턴스가 있으면 그걸 반환
    if (Config.#instance) return Config.#instance;
    this.values = new Map();
    Config.#instance = this;
  }
  static getInstance() {
    return this.#instance ?? new Config();
  }
  get(k) {
    return this.values.get(k);
  }
  set(k, v) {
    this.values.set(k, v);
  }
}

// 사용: 항상 동일 인스턴스
const a = Config.getInstance();
const b = Config.getInstance();
console.log(a === b); // true
a.set("env", "prod");
console.log(b.get("env")); // 'prod'
```
